"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const common_1 = require("@nestjs/common");
const type_definitions_storage_1 = require("../storages/type-definitions.storage");
let OrphanedTypesFactory = class OrphanedTypesFactory {
    constructor(typeDefinitionsStorage) {
        this.typeDefinitionsStorage = typeDefinitionsStorage;
    }
    create(types) {
        if (!types || (types && types.length === 0)) {
            return [];
        }
        const interfaceTypeDefs = this.typeDefinitionsStorage.getAllInterfaceDefinitions();
        const objectTypeDefs = this.typeDefinitionsStorage.getAllObjectTypeDefinitions();
        const inputTypeDefs = this.typeDefinitionsStorage.getAllObjectTypeDefinitions();
        const classTypeDefs = [
            ...interfaceTypeDefs,
            ...objectTypeDefs,
            ...inputTypeDefs,
        ];
        return classTypeDefs
            .filter(item => !item.isAbstract && types.includes(item.target))
            .map(({ type }) => type);
    }
};
OrphanedTypesFactory = tslib_1.__decorate([
    common_1.Injectable(),
    tslib_1.__metadata("design:paramtypes", [type_definitions_storage_1.TypeDefinitionsStorage])
], OrphanedTypesFactory);
exports.OrphanedTypesFactory = OrphanedTypesFactory;
